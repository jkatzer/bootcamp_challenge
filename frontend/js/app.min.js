var forumFrontEnd=angular.module("forumFrontEnd",["ngRoute","forumFrontEndControllers","forumFrontEndServices"]);forumFrontEnd.config(["$resourceProvider",function(a){a.defaults.stripTrailingSlashes=!1}]).config(["$httpProvider",function(a){a.defaults.xsrfCookieName="csrftoken",a.defaults.xsrfHeaderName="X-CSRFToken"}]).config(["$routeProvider",function(a){a.caseInsensitiveMatch=!0,a.when("/home",{templateUrl:"static/partials/threadList.html",controller:"ThreadListCtrl"}).when("/:threadId",{templateUrl:"static/partials/threadDetail.html",controller:"ThreadDetailCtrl"}).otherwise({redirectTo:"/home"})}]);var forumFrontEndControllers=angular.module("forumFrontEndControllers",[]);forumFrontEndControllers.controller("ThreadListCtrl",["$scope","$http","Thread",function(a,b,c){a.errorMsg="",a.threads=c.query(),a.blankForm={},a.latest_poster=function(a){return a.comments.length>0?a.comments[a.comments.length-1].username:a.username},a.createThread=function(d){threadSuccess=function(b){a.threadForm=a.blankForm,a.threads=c.query()},threadFail=function(b){a.errorMsg="Sorry, something went wrong. \n"+b.statusText,console.log("oops!"),console.log(b)},b.post("/api/threads/",d).then(threadSuccess,threadFail)}}]),forumFrontEndControllers.controller("ThreadDetailCtrl",["$scope","$routeParams","$http","Thread",function(a,b,c,d){a.errorMsg="",a.comments=[],a.commentForm={},a.thread={},a.updateThread=function(c){a.thread=d.get({threadId:b.threadId},function(b){console.log("update!"),a.comments=angular.copy(b.comments)})},a.updateThread(),a.updateComments=function(){d.get({threadId:b.threadId},function(b){a.comments=b.comments,a.$apply()})},a.createComment=function(b){b.thread=a.thread.url;var d=function(b){a.errorMsg="Sorry, something went wrong. \n"+b.statusText,console.log(a.errorMsg),console.log(b)};c.post("api/comments/",b).then(function(){a.commentForm={},a.updateComments()},d)},a.scorePlus=function(b){var d=function(a){b.errorMsg="Sorry, something went wrong. \n"+a.statusText,console.log("error:"),console.log(a)},e=angular.copy(b);e.score+=1,c.put(b.url,e).then(function(){b.score+=1,a.updateComments()},d)},a.scoreMinus=function(b){var d=function(a){b.errorMsg="Sorry, something went wrong. \n"+a.statusText,console.log("error:"),console.log(a)},e=angular.copy(b);e.score-=1,c.put(b.url,e).then(function(){b.score-=1,a.updateComments()},d)}}]);var forumFrontEndServices=angular.module("forumFrontEndServices",["ngResource"]);forumFrontEndServices.factory("Thread",["$resource",function(a){var b="api/threads/:threadId/";return a(b,{},{query:{method:"GET"}})}]);
//# sourceMappingURL=app.min.js.map